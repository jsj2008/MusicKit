{\rtf0\ansi{\fonttbl\f0\fnil Times-Roman;\f1\ftech Symbol;\f2\fmodern Courier;}
\paperw16220
\paperh13060
\margl120
\margr0
{\colortbl;\red0\green0\blue0;}
\f0\b0\i0\ulnone\ql\fs24\fi0\li0\gray0\fc0\cf0\up0\dn0 Release 4.0  Copyright 
\f1 ã
\f0 1993 by Stanford University.  All Rights Reserved.\
\

\pard\tx3120\tx3620\tx4120\fs16\li2620\fc0\cf0 \

\fs28 \

\fs16 \

\fs28 \

\fs16 \

\pard\b\li1100\fc0\cf0 \
\
\
\

\fs36 Fm1i, Fm1
\fs16 \

\pard\tx7140\b0\fs28\li2100\fc0\cf0 \
INHERITS FROM	SynthPatch\

\fs16 \

\fs28 DECLARED IN	musickit/synthpatches/synthpatches.h\

\fs16 \
\
\

\fs28 CLASS DESCRIPTION\

\fs16 \

\pard\tx3120\tx3620\tx4120\b\fs28\li2620\fc1\cf1 Fm1i
\b0  is an FM (frequency modulation) SynthPatch that uses an arbitrary-wavetable oscillator to modulate the frequency of another arbitrary-wavetable oscillator.  
\b Fm1i 
\b0 uses an interpolating oscillator for the carrier, while 
\b Fm1 
\b0 uses a non-interpolating oscillator (lower quality, but uses less DSP computation.) \

\b Fm1i 
\b0 is used as the root class for a number of FM SynthPatches.\
\
When using this SynthPatch in an interactive real-time context, such as playing from a MIDI keyboard, call 
\b MKUseRealTimeEnvelopes()
\b0  before allocating the SynthPatch.\

\pard\tx7140\li2100\fc0\cf0 \
INSTANCE VARIABLES\

\fs16 \

\pard\tx7140\tx10180\tx10680\i\fs28\fi-4540\li7140\fc0\cf0 Inherited from Object
\i0 	Class	isa;\

\fs16 \

\i\fs28 Inherited from SynthPatch
\i0 	id	synthElements;\

\pard\tx10180\tx10680\fi-520\li7660\fc0\cf0 id	synthInstrument;\
int	noteTag;\
MKSynthStatus	status;\
id	patchTemplate;\
BOOL	isAllocated;\
id	orchestra;\

\pard\tx7140\tx10180\tx10680\i\fi-4540\li7140\fc0\cf0 Declared in Fm1i
\i0 	WaveTable *	waveform\
	WaveTable *	m1Waveform\
	double 	cRatio\
	double 	m1Ratio\
	Envelope *	ampEnv\
	double 	amp0\
	double 	amp1\
	double 	ampAtt\
	double 	ampRel\
	Envelope *	freqEnv\
	double 	freq0\
	double 	freq1\
	double 	freqAtt\
	double 	freqRel\
	Envelope *	m1IndEnv\
	double 	m1Ind0\
	double 	m1Ind1\
	double 	m1IndAtt\
	double 	m1IndRel\
	double 	bright\
	double 	bearing\
	double 	portamento\

\fc1\cf1 	double 	phase\
	double 	m1Phase\
	double 	velocitySensitivity\
	double	afterTouchSensitivity\
	double 	pitchbendSensitivity\
	int 	velocity\
	int 	pitchbend\
	int 	afterTouch\
	int 	volume\
	int 	wavelen\

\fs16\fc0\cf0 \

\pard\tx7140\li2100\fc0\cf0 \
\

\fs28 METHOD TYPES\

\fs16 \

\pard\tx7140\tx10180\tx10680\fi-4540\li7140\fc0\cf0 	
\fs28 + patchTemplateFor:\

\f1 	- 
\f0 freeSelf\

\f1 	- 
\f0 controllerValues:	\

\fs16 	
\f1\fs28 - 
\f0 noteOnSelf:
\fs16 \

\fs28 	
\f1 - 
\f0 noteOffSelf:
\pard\tx7140\fs16\li2100\fc0\cf0 \

\pard\tx7140\tx10180\tx10680\fs28\fi-4540\li7140\fc0\cf0 	
\f1 - 
\f0 noteUpdateSelf:
\pard\tx7140\fs16\li2100\fc0\cf0 \

\pard\tx7140\tx10180\tx10680\fs28\fi-4540\li7140\fc0\cf0 	
\f1 - 
\f0 noteEndSelf	\

\pard\tx7140\fs16\li2100\fc0\cf0 \
\

\fs28 CLASS METHODS\
\

\b patchTemplateFor:\

\pard\tx3120\tx3620\tx4120\b0\fs16\li2620\fc0\cf0 \

\f1\fs28 + 
\f0\b patchTemplateFor:
\b0\i aNote\

\fs16 \

\i0\fs28 Returns a default template. 
\i aNote 
\i0 is ignored.\

\pard\tx7140\b\fs16\li2100\fc0\cf0 \

\b0\fs28 \
INSTANCE METHODS\

\fs16 \

\b \

\fs28 noteOnSelf:\

\pard\tx3120\tx3620\tx4120\b0\fs16\li2620\fc0\cf0 \

\f1\fs28 - 
\f0\b noteOnSelf:
\b0\i aNote\

\fs16 \

\fs28 aNote 
\i0 is assumed to be a noteOn or noteDur.  This method triggers (or retriggers) the Note's envelopes, if any.  If this is a new phrase, all instance variables are set to default values, then the values are read from the Note.  \

\pard\tx7140\b\fs16\li2100\fc0\cf0 \

\fs28 noteUpdateSelf:\

\pard\tx3120\tx3620\tx4120\b0\fs16\li2620\fc0\cf0 \

\f1\fs28 - 
\f0\b noteUpdateSelf:
\b0\i aNote\

\fs16 \

\fs28 aNote 
\i0 is assumed to be a noteUpdate and the receiver is assumed to be currently playing a Note.  Sets parameters as specified in 
\i aNote.
\i0 \

\pard\tx7140\b\fs16\li2100\fc0\cf0 \

\fs28 noteOffSelf:\

\pard\tx3120\tx3620\tx4120\b0\fs16\li2620\fc0\cf0 \

\f1\fs28 - (
\f0\fc1\cf1 double
\f1\fc0\cf0 )
\f0\b noteOffSelf:
\b0\i aNote\

\fs16 \

\fs28 aNote 
\i0 is assumed to be a noteOff.  This method causes the Note's envelopes (if any) to begin its release portion and returns the time for the envelopes to finish.  Also sets any parameters present in 
\i aNote.
\pard\tx7140\b\i0\fs16\li2100\fc0\cf0 \

\fs28 \
noteEndSelf\

\pard\tx3120\tx3620\tx4120\b0\fs16\li2620\fc0\cf0 \

\f1\fs28 - 
\f0\b noteEndSelf
\b0\i \

\fs16 \

\i0\fs28 Resest instance variables to default values.
\pard\tx7140\b\fs16\li2100\fc0\cf0 \

\fs28 \
preemptFor:\

\pard\tx3120\tx3620\tx4120\b0\fs16\li2620\fc0\cf0 \

\f1\fs28 - 
\f0\b\fc1\cf1 preemptFor:
\b0\i aNote
\fc0\cf0 \

\fs16 \

\i0\fs28 Preempts envelope, if any.
\pard\tx7140\b\fs16\li2100\fc0\cf0 \

\fs28 \

\b0 PARAMETER INTERPRETATION\
\

\b\fc1\cf1 afterTouch
\b0  - MIDI afterTouch (also called channel pressure) attenuates the  amount of frequency modulation.  In the range 0:127.  A value of 127 (the default) produces no attenuation.\

\b \
afterTouchSensitivity
\b0  - Controls the amount of attenuation caused by afterTouch.  If afterTouchSensitivity is 1.0 and afterTouch is 0, modulation is 0.  If afterTouchSensitivity is .5 and afterTouch is 0, modulation is half the normal amount.  Default sensitivity is 0.5.  \

\b \
ampEnv
\b0  - Amplitude envelope.  Default is an envelope that is always a constant 1.0.\
\

\b amp
\b0  - Amplitude.  In the range 0.0:1.0.  amp1 is a synonym for amp.  Default is 0.1.\
\

\b amp0
\b0  - Amplitude when the envelope is at 0.0.  amp is amplitude when the envelope is at 1.0.  amp1 is a synonym for amp.  Default is 0.0.\
\

\b ampAtt
\b0  - Time of attack portion of envelope in seconds.  If this parameter is not present, the times in the envelope are used verbatim.\
\

\b ampRel
\b0  - Time of release portion of envelope in seconds.  If this parameter is not present, the times in the envelope are used verbatim.\
\

\b bearing
\b0  - Left/right panning of signal.  In range -45.0:45.0.  -45.0 is far left.  Default is 0.0.\
\

\b bright
\b0  - Brightness, a multiplier on fm index.  Defaults to 1.0.\

\b \
controlChange
\b0  - This parameter is the MIDI controller number to be affected.  It is used in conjunction with the parameter controlVal, which provides the value the controller is set to.  This SynthPatch uses MIDI volume (controller 7) to adjust output volume as an attenuation of the final output signal.  The default for MIDI volume is 127.\
\

\b controlVal
\b0  - See controlChange.\
\

\b cRatio
\b0  - Carrier frequency scaler.  The resulting carrier frequency is cRatio multiplied by the freq parameter (or the frequency derived from the keyNum parameter).  c1Ratio is a synonym.  Default is 1.0.\

\b \
freq
\b0  - Frequency in Hz.  freq1 is a synonym for freq.  Default is A440.\
\

\b freqEnv
\b0  - Frequency envelope.  Default is an envelope that is always a constant 1.0.\
\

\b freq0
\b0  -Fundamental frequency when the envelope is at 0.  freq is frequency when the envelope is at 1.  freq1 is a synonym for freq.  Default is 0.0.\
\

\b freqAtt
\b0  -Time of attack portion of envelope in seconds.  If this parameter is not present, the times in the envelope are used verbatim.\
\

\b freqRel
\b0  -Time of release portion of envelope in seconds.  If this parameter is not present, the times in the envelope are used verbatim.\
\

\b keyNum
\b0  - The MIDI key number, an alternative to freq.  If both freq and keyNum are present, freq, takes precedence.  In the range 0:127.\
\

\b m1Ind
\b0  - Modulation index.  If an envelope, is specified, this is the index when the envelope is at 1.  
\b m1Ind1
\b0  is synonym for 
\b m1Ind
\b0 .  Default is 2.0.\

\b \
m1IndEnv
\b0  - Modulation index envelope.  Default is a constant value of 1.0.\

\b \
m1Ind0
\b0  - Modulation index when envelope is at 0.0.  
\b m1Ind
\b0  is index when envelope is at 1.0.  Default is 0.0.\

\b \
m1IndAtt
\b0  -Time of attack portion of envelope in seconds.  If this parameter is not present, the times in the envelope are used verbatim.\

\b \
m1IndRel
\b0  - Time of release portion of envelope in seconds.  If this parameter is not present, the times in the envelope are used verbatim.\

\b \
m1Ratio
\b0  - Modulator frequency scaler.  The resulting modulator frequency is m1Ratio multiplied by the freq parameter.  Default is 1.0.\

\b \
m1Phase
\b0  - Initial phase in degrees of modulator wavetable.  Rarely needed.  Default is 0.0.\

\b \
m1Waveform
\b0  - Modulator wave table.  Default produces a sine wave.   If you specify a Samples object to an FM SynthPatch, the length may be any power of 2.\

\b \
phase
\b0  - Initial phase of wavetable in degrees.  Rarely needed.  Default is 0.0.\
\

\b pitchBend
\b0  - Modifies frequency (or keyNum) as a 14 bit integer.  A value of MIDI_ZEROBEND (defined as 0x2000 in <mididriver/midi_spec.h>) gives no  bend.  0 is maximum negative bend.  0x3fff is maximum positive bend.  See TuningSystem class for details.  May give unexpected results when combined with frequency envelopes.  Default is MIDI_ZEROBEND.\
\

\b portamento
\b0  - Portamento time.  In a phrase, the transition time to a note from the immediately preceding note.  Overrides the time values of the first segment of the envelopes.  Note that portamento is applied after the attack-time parameters.\
\

\b velocity
\b0  - A MIDI parameter.  In range 0:127.  The default is 64.  Velocity scales amplitude by an amount deteremined by velocitySensitivity.  Some SynthPatches also scale brightness or FM index based on velocity.  \
\

\b velocitySensitivity
\b0  - In range 0.0:1.0.  Default is 0.5.  When velocitySensitivity is 0, velocity has no effect.\

\b pitchBendSensitivity
\b0  - A value of 0.0 means pitchBend has no effect.  A value of 1.0 means pitch bend corresponds to plus or minus a semitone.  Larger values give larger pitch deviation.  Default is 3.0.\
\

\b waveform
\b0  - WaveTable used for the oscillator (only the carrier, in the case of FM).  Defaults to sine.  Note that the WaveTable you supply is normalized so that its peak amplitude is 1.0.\
\

\b waveLen
\b0  - Length of wavetable.  Defaults to an optimal value.  May only be set at the start of a phrase or with a noteUpdate that has no noteTag.\
\
\

}
